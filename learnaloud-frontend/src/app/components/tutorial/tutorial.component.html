<div class="landing-page">

  <!-- View 1: Landing -->
  @if (view === 'landing') {
    <div class="landing-view">
      <div class="hero">
        <h1 class="hero-title">LearnAloud</h1>
        <p class="hero-tagline">Your AI-powered research companion</p>
        <p class="hero-description">
          Upload any paper, have a voice conversation with an AI tutor,
          and discover related research â€” all in one place.
        </p>
        <div class="hero-actions">
          <button class="btn btn-primary" (click)="goToAuth('signup')">Get Started</button>
          <button class="btn btn-secondary" (click)="goToAuth('login')">Log In</button>
        </div>
      </div>

      <div class="features">
        <div class="feature-card">
          <div class="feature-icon">&#127908;</div>
          <h3>Voice Tutoring</h3>
          <p>Ask questions about any paper using your voice. Get real-time explanations from an AI tutor.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#128221;</div>
          <h3>PDF Highlights</h3>
          <p>Key sections are highlighted in real time as the tutor explains concepts from the paper.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#128218;</div>
          <h3>Paper Discovery</h3>
          <p>Find related papers on ArXiv, look up citations, and build your reading list effortlessly.</p>
        </div>
      </div>
    </div>
  }

  <!-- View 2: Auth -->
  @if (view === 'auth') {
    <div class="auth-view">
      <div class="auth-card">
        <button class="back-link" (click)="goBack()">&larr; Back</button>
        <h2>{{ authMode === 'signup' ? 'Create your account' : 'Welcome back' }}</h2>
        <p class="auth-subtitle">{{ authMode === 'signup' ? 'Start learning with LearnAloud' : 'Log in to continue' }}</p>

        <form (ngSubmit)="submitAuth()" class="auth-form">
          @if (authMode === 'signup') {
            <label class="form-label">
              Name
              <input type="text" class="form-input" [(ngModel)]="authName" name="name" placeholder="Your name" autocomplete="name" />
            </label>
          }
          <label class="form-label">
            Email
            <input type="email" class="form-input" [(ngModel)]="authEmail" name="email" placeholder="you@example.com" autocomplete="email" />
          </label>
          <label class="form-label">
            Password
            <input type="password" class="form-input" [(ngModel)]="authPassword" name="password" placeholder="Enter password" autocomplete="current-password" />
          </label>

          @if (authError) {
            <p class="auth-error">{{ authError }}</p>
          }

          <button type="submit" class="btn btn-primary btn-full">
            {{ authMode === 'signup' ? 'Sign Up' : 'Log In' }}
          </button>
        </form>

        <p class="auth-toggle">
          @if (authMode === 'signup') {
            Already have an account?
            <a (click)="toggleAuthMode()">Log in</a>
          } @else {
            Don't have an account?
            <a (click)="toggleAuthMode()">Sign up</a>
          }
        </p>
      </div>
    </div>
  }

  <!-- View 3: Onboarding -->
  @if (view === 'onboarding') {
    <div class="onboarding-view">
      <div class="onboarding-card">
        <h2>Tell us about yourself</h2>
        <p class="onboarding-subtitle">We'll tailor the experience to your background.</p>

        <div class="onboarding-section">
          <h3>Academic Level</h3>
          <div class="pill-group">
            @for (level of academicLevels; track level.value) {
              <button
                class="pill"
                [class.pill-selected]="selectedLevel === level.value"
                (click)="selectLevel(level.value)"
              >
                {{ level.label }}
              </button>
            }
          </div>
        </div>

        <div class="onboarding-section">
          <h3>Subjects of Interest</h3>
          <div class="chip-group">
            @for (subject of subjects; track subject) {
              <button
                class="chip"
                [class.chip-selected]="isSubjectSelected(subject)"
                (click)="toggleSubject(subject)"
              >
                {{ subject }}
              </button>
            }
          </div>
        </div>

        <button
          class="btn btn-primary btn-full"
          [disabled]="!selectedLevel || selectedSubjects.length === 0"
          (click)="submitOnboarding()"
        >
          Start Learning
        </button>
      </div>
    </div>
  }

</div>
